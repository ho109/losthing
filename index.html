<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>분실물 관리 시스템</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

<!-- ① 입장 선택 화면 -->
<section id="screen-1" class="screen active">
  <h2>분실물 관리 시스템</h2>
  <p class="muted">모드를 선택하세요.</p>

  <div class="container" style="margin-top:12px;">
    <h3>입장 선택</h3>
    <div class="row" style="margin-top:12px;">
      <button id="btn-guest" class="mode-btn">비회원(보기만)</button>
      <button id="btn-admin" class="mode-btn">관리자 로그인</button>
    </div>

    <div id="admin-login-box" class="hidden" style="margin-top:14px;">
      <div class="divider"></div>
      <h4>관리자 로그인</h4>
      <div class="login-grid">
        <input id="admin-id" type="text" placeholder="아이디 (예: a)" />
        <input id="admin-pw" type="password" placeholder="비밀번호 (예: b)" />
        <button id="btn-admin-submit">로그인</button>
        <div class="muted">※ 아이디/비밀번호는 사전에 지정된 값만 허용됩니다.</div>
      </div>
    </div>
  </div>

  <div class="row" style="margin-top:16px;">
    <button id="go-list-from-1">물품 리스트 화면으로 이동</button>
  </div>
</section>

<!-- ② 물품 리스트 화면 (열람 공통) -->
<section id="screen-2" class="screen">
  <button id="btn-back-1" class="back-btn">◀ 뒤로</button>
  <button id="guide-button" class="guide-btn" onclick="showGuide()">📖 사용 설명서</button>

  <div id="guide-popup" class="guide-popup">
    <div>
      <span class="close-button" onclick="closeGuide()">×</span>
      <h3>📌 분실물 찾기 안내</h3>
      <p>검색창에 분실물 이름을 입력하세요.</p>
      <p>사진을 누르면 확대됩니다.</p>
      <p>등록은 관리자만 가능합니다.</p>
    </div>
  </div>

  <div class="search-section">
    <input id="search-input" type="text" placeholder="전체 층 검색" onkeydown="if(event.key==='Enter') searchItems()">
    <button onclick="searchItems()">검색</button>
    <button id="go-manage" class="hidden">등록·관리 화면으로</button>
  </div>

  <div class="floor-buttons">
    <button onclick="selectFloor(1)">1층</button>
    <button onclick="selectFloor(2)">2층</button>
    <button onclick="selectFloor(3)">3층</button>
    <button onclick="selectFloor(4)">4층</button>
  </div>

  <div class="container">
    <h2 id="floor-title">1층 분실물</h2>
    <ul id="lost-items" class="lost-items"></ul>
  </div>

  <!-- 오른쪽 고정 공지창 -->
  <div id="school-notice">
    <h4>📢 학교 공지</h4>
    <p id="notice-text">공지 내용을 불러오는 중...</p>
  </div>

  <!-- 이미지 팝업 -->
  <div id="image-popup" class="image-popup">
    <img id="popup-img" src="">
    <span class="image-close" onclick="closeImagePopup()">&times;</span>
  </div>
</section>

<!-- ③ 등록·관리 화면 (관리자 전용) -->
<section id="screen-3" class="screen">
  <button id="btn-back-2" class="back-btn">◀ 리스트로</button>
  <h2 class="page-top">등록 · 관리</h2>
  <p class="muted">관리자 전용 화면입니다.</p>

  <div class="floor-buttons">
    <button onclick="selectFloor(1)">1층</button>
    <button onclick="selectFloor(2)">2층</button>
    <button onclick="selectFloor(3)">3층</button>
    <button onclick="selectFloor(4)">4층</button>
  </div>

  <div class="container">
    <h3>현재 선택: <span id="floor-title-manage">1층 분실물</span></h3>

    <!-- 등록 -->
    <div class="input-section">
      <input type="text" id="item-input" placeholder="분실물 입력" onkeydown="if(event.key==='Enter') addItem()">
      <input type="file" id="item-image" accept="image/*">
      <button id="btn-add" onclick="addItem()">입력</button>
      <p class="muted">이미지 선택은 선택사항입니다.</p>
    </div>

    <div class="divider"></div>
    <h4>리스트 (클릭 시 삭제 확인창)</h4>
    <ul id="lost-items-manage" class="lost-items"></ul>
  </div>
</section>

<!-- Firebase SDK -->
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>

<!-- 앱 스크립트 -->
<script src="app.js"></script>
</body>
</html>
